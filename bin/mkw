#!/bin/bash

scale=$(( ( RANDOM % 2 ) + 3 ))
x=$(( RANDOM % $(( $(convert $1 -format %w info:) - $scale * 288 )) )) 
y=$(( RANDOM % $(( $(convert $1 -format %h info:) - $scale * 54 )) )) 
echo $scale $x $y

blur=1.5
rad=6

mkdir -p ~/.bgs
tmp=$(mktemp)
convert $1 -crop $(($scale * 288))x$(($scale * 54))+${x}+$y -blur ${rad}x$blur -resize 5760 -repage 0x0+0+0 $tmp
convert $tmp -crop 1920x1080+0+0 ~/.bgs/a.png
convert $tmp -crop 1920x1080+1920+0 ~/.bgs/b.png
convert $tmp -crop 1920x1080+3840+0 ~/.bgs/c.png
convert $tmp -gamma .30 ~/.lockbg.png
rm $tmp

feh --bg-scale ~/.bgs
